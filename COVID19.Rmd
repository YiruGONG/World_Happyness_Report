---
title: "COVID19"
output: 
  html_document:
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
library(tidyverse)
library(countrycode)
library(plotly)
library(dplyr)

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

Jiaqi Chen (jc5681),
Xinran Sun (xs2447),
Yiru Gong (yg2832),
Yunlin Zhou (yz4184)

## Data Input

```{r}
covid_df = readxl::read_xlsx('MortalityDataWHR2021C2.xlsx') %>% 
  drop_na() %>% 
  janitor::clean_names()
```

```{r}
covid_death_rate = covid_df %>% 
  plot_ly(x = ~country_name, 
         y = ~covid_19_deaths_per_100_000_population_in_2020,
         type = "bar", colors = "viridis")

covid_death_rate
```

```{r}
death_trend_top = covid_df %>% 
  filter(covid_19_deaths_per_100_000_population_in_2020 > 100) %>% 
  pivot_longer(
    all_cause_death_count_2017:all_cause_death_count_2020,
    names_to = 'year',
    values_to = 'death',
    names_prefix = 'all_cause_death_count_'
  ) %>% 
  plot_ly(x = ~year, y = ~death, type = 'scatter', mode = 'lines', text = ~country_name, color = ~country_name)

death_trend_top
```




